<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learning Centre - Partnerdesk</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/scrollreveal"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      background-color: #1a1a2e; /* Darker purple-blue background */
      color: #e0e0eb; /* Light text for dark background */
      overflow-x: hidden; /* Prevent horizontal scroll */
      transition: background-color 0.3s ease; /* Smooth background transition */
    }

    body.no-scroll {
      overflow: hidden; /* Prevent body scroll when nav is open */
    }

    /* Custom styles for the logo and site title - consistent with index.html */
    .logo-title-container {
      position: fixed;
      top: 0;
      left: 0;
      padding: 1.5rem 2rem;
      z-index: 1001;
      display: flex;
      align-items: center;
      background: linear-gradient(to right, rgba(0,0,0,0.8), rgba(0,0,0,0)); /* Gradient for subtle effect */
      width: 300px; /* Adjust width as needed */
    }

    .logo-title-container .logo {
      width: 90px; /* Increased logo size by 50% (from 60px) to match index.html */
      height: 90px; /* Increased logo size by 50% (from 60px) to match index.html */
      margin-right: 1rem;
      border-radius: 8px; /* Rounded corners for logo */
      object-fit: cover; /* Ensure logo covers the area */
    }

    .logo-title-container .site-title {
      font-size: 1.8rem; /* Big Partnerdesk */
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.05cm;
    }

    /* Navigation Bar */
    nav {
      position: fixed;
      top: 0;
      right: 0; /* Align to right */
      height: 100vh; /* Full height */
      /* Using clamp for flexible width: min 200px, preferred 70vw, max 250px */
      width: clamp(200px, 70vw, 250px);
      background: rgba(0, 0, 0, 0.8); /* Semi-transparent dark background */
      backdrop-filter: blur(10px); /* Frosted glass effect */
      color: white;
      padding: 2rem 1rem;
      z-index: 1000;
      display: flex;
      flex-direction: column; /* Stack links vertically */
      justify-content: center; /* Center links vertically */
      box-shadow: -5px 0 15px rgba(0,0,0,0.3); /* Shadow on the left side */
      transition: transform 0.3s ease-in-out; /* Smooth transition for responsiveness */
      transform: translateX(100%); /* Hidden by default */
      overflow-y: auto; /* Make it scrollable */
      box-sizing: border-box; /* Include padding and border in element's total width */
    }

    nav.active {
      transform: translateX(0%); /* Show when active */
    }

    nav a {
      color: #ffffff;
      text-decoration: none;
      font-weight: 600;
      padding: 0.8rem 1.5rem;
      margin: 0.5rem 0;
      border-radius: 8px; /* Rounded corners */
      transition: background-color 0.3s, color 0.3s, transform 0.2s;
      text-align: right; /* Align text to the right */
      letter-spacing: 0.05cm; /* Increased letter spacing */
      white-space: nowrap; /* Prevent text wrapping */
      overflow: hidden; /* Hide overflowing content */
      text-overflow: ellipsis; /* Show ellipsis for overflowed text */
      box-sizing: border-box; /* Include padding and border in element's total width */
    }

    nav a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: #8a2be2; /* Accent color: Amethyst */
      transform: translateX(-5px); /* Slight hover effect */
    }

    /* Hamburger menu */
    .hamburger-menu {
      display: flex; /* Always visible */
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 1002;
      cursor: pointer;
      flex-direction: column;
      justify-content: space-around;
      width: 30px;
      height: 25px;
      transition: all 0.3s ease-in-out;
    }

    .hamburger-menu .bar {
      width: 100%;
      height: 3px;
      background-color: white;
      border-radius: 2px;
      transition: all 0.3s ease-in-out;
    }

    /* Overlay for when nav is open */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
      z-index: 999; /* Below nav, above content */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }

    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Page Header Section - New Purple/Pink Gradient */
    .page-header {
      background: linear-gradient(to bottom right, #533483, #9a2e85, #e94560); /* Purple to Pink to Red-Pink */
      color: white;
      padding: 8rem 1rem 4rem; /* Adjusted padding for sub-pages */
      text-align: center;
      position: relative;
      overflow: hidden;
      border-bottom-left-radius: 50px;
      border-bottom-right-radius: 50px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .page-header h1 {
      font-size: 3rem; /* Slightly smaller for sub-pages */
      margin: 0 0 1rem;
      font-weight: 700;
      letter-spacing: -0.08cm;
      text-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .page-header p {
      font-size: 1.2rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0.9;
    }

    /* Section Styling */
    .section {
      padding: 5rem 1.5rem; /* Increased padding */
      max-width: 1200px;
      margin: auto;
      text-align: center;
    }

    .section h2 {
      font-size: 2.5rem; /* Larger section titles */
      margin-bottom: 2.5rem;
      font-weight: 700;
      color: #e0e0eb; /* Light text for dark background */
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    /* Styles for the prominent course showcase cards */
    .course-showcase-card {
      border-radius: 20px; /* Even more rounded corners */
      padding: 3rem; /* Increased padding for larger content */
      box-shadow: 0 8px 30px rgba(0,0,0,0.4); /* Stronger shadow */
      transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
      border: 1px solid; /* Border will be colored per card */
      text-align: center; /* Center content within this card */
      margin-bottom: 4rem; /* Space between cards */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .course-showcase-card img {
      max-width: 100%; /* Ensures image fills its container */
      height: 250px; /* Fixed height for consistency across cards */
      object-fit: cover; /* Covers the area, cropping if necessary */
      border-radius: 15px; /* Rounded corners for image */
      margin-bottom: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .course-showcase-card h3 {
      font-size: 2.5rem; /* Larger title for this prominent card */
      margin-bottom: 1.5rem;
    }

    .course-showcase-card p {
      font-size: 1.3rem; /* Larger text for this card */
      color: #c0c0c0;
      margin-bottom: 2rem;
      max-width: 800px;
    }

    .course-showcase-card .button-group {
      display: flex;
      flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
      justify-content: center;
      gap: 1rem; /* Space between buttons */
      margin-top: auto; /* Push button group to the bottom */
    }

    .course-showcase-card .register-button,
    .course-showcase-card .syllabus-button,
    .course-showcase-card .edit-button,
    .course-showcase-card .delete-button {
      display: inline-block;
      padding: 1.2rem 2.5rem; /* Even larger button */
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-weight: 700;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .course-showcase-card .register-button:hover,
    .course-showcase-card .syllabus-button:hover,
    .course-showcase-card .edit-button:hover,
    .course-showcase-card .delete-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Specific bright colors for course showcase cards */
    .course-showcase-color-1 { background-color: #3182CE; border-color: #63B3ED; } /* Blue */
    .course-showcase-color-1 h3 { color: #E2E8F0; }
    .course-showcase-color-1 .register-button { background-color: #4299E1; }
    .course-showcase-color-1 .register-button:hover { background-color: #3182CE; }
    .course-showcase-color-1 .syllabus-button { background-color: #2C5282; } /* Darker blue for syllabus */
    .course-showcase-color-1 .syllabus-button:hover { background-color: #2A4365; }

    .course-showcase-color-2 { background-color: #38A169; border-color: #68D391; } /* Green */
    .course-showcase-color-2 h3 { color: #E2E8F0; }
    .course-showcase-color-2 .register-button { background-color: #48BB78; }
    .course-showcase-color-2 .register-button:hover { background-color: #38A169; }
    .course-showcase-color-2 .syllabus-button { background-color: #2F855A; } /* Darker green for syllabus */
    .course-showcase-color-2 .syllabus-button:hover { background-color: #276749; }

    .course-showcase-color-3 { background-color: #B7791F; border-color: #F6AD55; } /* Orange */
    .course-showcase-color-3 h3 { color: #E2E8F0; }
    .course-showcase-color-3 .register-button { background-color: #ED8936; }
    .course-showcase-color-3 .register-button:hover { background-color: #B7791F; }
    .course-showcase-color-3 .syllabus-button { background-color: #975A16; } /* Darker orange for syllabus */
    .course-showcase-color-3 .syllabus-button:hover { background-color: #7B341A; }

    .course-showcase-color-4 { background-color: #D53F8C; border-color: #F687B3; } /* Pink */
    .course-showcase-color-4 h3 { color: #E2E8F0; }
    .course-showcase-color-4 .register-button { background-color: #ED64A6; }
    .course-showcase-color-4 .register-button:hover { background-color: #D53F8C; }
    .course-showcase-color-4 .syllabus-button { background-color: #9B2C65; } /* Darker pink for syllabus */
    .course-showcase-color-4 .syllabus-button:hover { background-color: #702459; }

    .course-showcase-color-5 { background-color: #00A3C4; border-color: #00D1FF; } /* Bright Cyan */
    .course-showcase-color-5 h3 { color: #E2E8F0; }
    .course-showcase-color-5 .register-button { background-color: #00BCD4; }
    .course-showcase-color-5 .register-button:hover { background-color: #00A3C4; }
    .course-showcase-color-5 .syllabus-button { background-color: #007B8C; } /* Darker cyan for syllabus */
    .course-showcase-color-5 .syllabus-button:hover { background-color: #005F6B; }

    .course-showcase-color-6 { background-color: #805AD5; border-color: #B794F4; } /* Purple */
    .course-showcase-color-6 h3 { color: #E2E8F0; }
    .course-showcase-color-6 .register-button { background-color: #9F7AEA; }
    .course-showcase-color-6 .register-button:hover { background-color: #805AD5; }
    .course-showcase-color-6 .syllabus-button { background-color: #553C9A; } /* Darker purple for syllabus */
    .course-showcase-color-6 .syllabus-button:hover { background-color: #44337A; }


    .why-join-section {
      background: linear-gradient(to bottom right, #533483, #9a2e85); /* Gradient background */
      padding: 5rem 1.5rem;
      max-width: 1200px;
      margin: 4rem auto; /* Added margin to separate from other sections */
      border-radius: 25px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
      color: white;
    }

    .why-join-section h2 {
      font-size: 3rem;
      margin-bottom: 2.5rem;
      font-weight: 700;
      color: #ffffff;
      text-shadow: 0 3px 15px rgba(0,0,0,0.4);
    }

    .why-join-section .intro-text {
      font-size: 1.3rem;
      max-width: 800px;
      margin: 0 auto 3rem;
      opacity: 0.9;
    }

    .benefits-grid-unique {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }

    .unique-benefit-card {
      background: rgba(255, 255, 255, 0.15); /* Slightly transparent white */
      border-radius: 18px;
      padding: 2.5rem;
      box-shadow: 0 5px 25px rgba(0,0,0,0.4);
      transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    .unique-benefit-card:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 12px 30px rgba(0,0,0,0.5);
    }

    .unique-benefit-card .icon-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      border: 2px solid; /* Border color will be set by specific class */
    }

    .unique-benefit-card .icon-circle svg {
      width: 45px;
      height: 45px;
      color: white; /* Icons are white */
    }

    .unique-benefit-card h3 {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: #ffffff;
    }

    .unique-benefit-card p {
      font-size: 1rem;
      color: #e0e0eb;
      flex-grow: 1;
    }

    /* Unique Benefit Card Colors */
    .unique-benefit-card.ub-color-1 .icon-circle { background-color: #FFD700; border-color: #FFEA00; } /* Gold */
    .unique-benefit-card.ub-color-2 .icon-circle { background-color: #32CD32; border-color: #7CFC00; } /* Lime Green */
    .unique-benefit-card.ub-color-3 .icon-circle { background-color: #87CEEB; border-color: #ADD8E6; } /* Sky Blue */
    .unique-benefit-card.ub-color-4 .icon-circle { background-color: #FF7F50; border-color: #FFA07A; } /* Coral */
    .unique-benefit-card.ub-color-5 .icon-circle { background-color: #E6E6FA; border-color: #D8BFD8; } /* Lavender */


    .how-to-register-section {
      background: #2e2e4a;
      padding: 3rem;
      border-radius: 20px;
      margin-top: 4rem;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
    }

    .how-to-register-section h2 {
      color: #e94560;
      margin-bottom: 1.5rem;
    }

    .how-to-register-section p {
      font-size: 1.1rem;
      color: #a0a0b5;
      margin-bottom: 1.5rem;
    }

    .how-to-register-section .register-button {
      background-color: #e94560;
      color: white;
      padding: 1rem 2.5rem;
      border-radius: 30px;
      font-weight: 700;
      transition: background-color 0.3s, transform 0.2s;
      text-decoration: none;
      display: inline-block;
      margin-top: 1.5rem;
    }

    .how-to-register-section .register-button:hover {
      background-color: #d63050;
      transform: translateY(-3px);
    }

    footer {
      text-align: center;
      padding: 3rem;
      background: #0a0a0a; /* Very dark footer */
      font-size: 0.9rem;
      color: #888888;
      border-top-left-radius: 30px; /* Rounded top corners */
      border-top-right-radius: 30px;
    }

    footer p {
      margin-bottom: 0.5rem; /* Spacing for footer lines */
    }

    /* Admin Panel Styles */
    .admin-panel-container {
      padding: 5rem 1.5rem;
      max-width: 1200px;
      margin: auto;
      text-align: center;
    }

    .admin-panel-container .admin-panel {
      background-color: #3e3e5a;
      padding: 2.5rem;
      border-radius: 20px;
      margin-top: 4rem;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      text-align: left;
    }

    .admin-panel-container .admin-panel h2 {
      color: #e94560; /* Pink for admin panel heading */
      margin-bottom: 1.5rem;
    }

    .admin-panel-container .input-group {
      margin-bottom: 1rem;
    }

    .admin-panel-container label {
      display: block;
      margin-bottom: 0.5rem;
      color: #e0e0eb;
      font-weight: 600;
    }

    /* Specific and forceful styling for admin panel inputs/textareas */
    #adminPanelContainer .admin-panel input[type="text"],
    #adminPanelContainer .admin-panel textarea,
    #adminPanelContainer .admin-panel input[type="color"], /* Added color input */
    #adminPanelContainer .admin-panel select { /* Added select for card class */
      background-color: #2a2a4a !important; /* Even darker background */
      border: 1px solid #5a5a7a;
      padding: 0.8rem 1.2rem;
      border-radius: 10px;
      color: #ffffff !important; /* Pure white text */
      font-size: 1rem;
      box-sizing: border-box;
      width: 100%;
    }

    /* Adjust color input specific styling */
    #adminPanelContainer .admin-panel input[type="color"] {
        padding: 0.2rem; /* Smaller padding for color input */
        height: 40px; /* Fixed height for color input */
        width: 100px; /* Fixed width for color input */
        cursor: pointer;
    }

    /* Style for file input button */
    #adminPanelContainer .admin-panel input[type="file"] {
        display: block;
        width: 100%;
        padding: 0.8rem 1.2rem;
        background-color: #2a2a4a;
        border: 1px solid #5a5a7a;
        border-radius: 10px;
        color: #ffffff;
        cursor: pointer;
    }

    #adminPanelContainer .admin-panel input[type="file"]::-webkit-file-upload-button {
        visibility: hidden;
        width: 0;
        padding: 0;
        margin: 0;
    }
    #adminPanelContainer .admin-panel input[type="file"]::before {
        content: 'Choose File';
        display: inline-block;
        background: #e94560; /* Pink for file input button */
        color: #ffffff;
        border: none;
        border-radius: 20px;
        padding: 0.5rem 1.5rem;
        outline: none;
        white-space: nowrap;
        -webkit-user-select: none;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.9rem;
        transition: background-color 0.3s;
    }
    #adminPanelContainer .admin-panel input[type="file"]:hover::before {
        background-color: #d63050;
    }

    #adminPanelContainer .admin-panel input[type="text"]::placeholder,
    #adminPanelContainer .admin-panel textarea::placeholder {
      color: #A0A0B5 !important; /* Slightly darker light grey placeholder */
    }

    .admin-panel-container button {
      background-color: #4CAF50; /* Green for add/update button */
      color: white;
      padding: 0.8rem 2rem;
      border-radius: 30px;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.2s;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      margin-top: 1.5rem;
      margin-right: 1rem;
    }

    .admin-panel-container button:hover {
      background-color: #388E3C;
      transform: translateY(-2px);
    }

    .admin-panel-container .admin-message {
      background-color: #2a2a4a;
      border-left: 4px solid #e94560; /* Pink border */
      padding: 1rem;
      margin-top: 2rem;
      border-radius: 8px;
      color: #e0e0eb;
      font-size: 0.95rem;
    }

    /* Edit and Delete buttons for course cards */
    .course-showcase-card .edit-button,
    .course-showcase-card .delete-button {
      display: none; /* Hidden by default */
      padding: 0.8rem 1.5rem;
      border-radius: 20px;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.2s;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      margin: 0.5rem;
    }

    /* Show edit/delete buttons when admin is logged in */
    .course-showcase-card.admin-mode .edit-button,
    .course-showcase-card.admin-mode .delete-button {
      display: inline-block;
    }

    /* Logout Admin button */
    .admin-panel-container .logout-admin-button {
      margin-top: 4rem; /* Adjust spacing as needed */
      background-color: #DC2626; /* Red color for logout */
      color: white;
      padding: 0.8rem 2rem;
      border-radius: 30px;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.2s;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      display: block; /* Always block when present */
    }

    .admin-panel-container .logout-admin-button:hover {
      background-color: #B91C1C;
      transform: translateY(-2px);
    }

    /* Course Management Section within Admin Panel */
    .admin-panel-container .course-management {
      background-color: #2a2a4a;
      padding: 2rem;
      border-radius: 15px;
      margin-top: 2rem;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    }

    .admin-panel-container .course-management h3 {
      color: #e94560;
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
    }

    .admin-panel-container .course-list {
      margin-top: 1.5rem;
      max-height: 300px; /* Increased height for course list */
      overflow-y: auto;
      border: 1px solid #4a4a6a;
      border-radius: 8px;
      padding: 0.5rem;
    }

    .admin-panel-container .course-item {
      display: flex;
      flex-direction: column; /* Stack name/desc and buttons */
      justify-content: space-between;
      align-items: flex-start; /* Align text to left */
      padding: 0.8rem;
      border-bottom: 1px solid #3e3e5a;
      color: #e0e0eb;
      text-align: left;
    }

    .admin-panel-container .course-item:last-child {
      border-bottom: none;
    }

    .admin-panel-container .course-item span {
      flex-grow: 1;
      text-align: left;
      margin-bottom: 0.5rem;
    }

    .admin-panel-container .course-item .course-actions button {
      margin-left: 0.5rem;
      padding: 0.4rem 0.8rem;
      font-size: 0.8rem;
      border-radius: 15px;
      margin-top: 0;
    }

    /* Custom Modal/Message Box Styles (consistent with other pages) */
    .custom-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }
    .custom-modal-overlay.active {
        opacity: 1;
        visibility: visible;
    }
    .custom-modal-content {
        background: #2D3748;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        color: #E2E8F0;
        transform: translateY(-20px);
        opacity: 0;
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    }
    .custom-modal-overlay.active .custom-modal-content {
        transform: translateY(0);
        opacity: 1;
    }
    .custom-modal-content p {
        font-size: 1.1rem;
        margin-bottom: 20px;
    }
    .custom-modal-content button {
        background-color: #e94560; /* Default button color for learning page */
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        margin: 0 5px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
    }
    .custom-modal-content button:hover {
        transform: translateY(-2px);
    }
    .custom-modal-content .confirm-button {
        background-color: #EF4444; /* Red for confirm delete */
        color: white; /* Ensure white text on red */
    }
    .custom-modal-content .confirm-button:hover {
        background-color: #C53030;
    }
    .custom-modal-content .cancel-button {
        background-color: #5a5a7a; /* Gray for cancel */
        color: white; /* Ensure white text on gray */
    }
    .custom-modal-content .cancel-button:hover {
        background-color: #4a4a5a;
    }

    /* Responsive adjustments */
    @media (max-width: 1024px) {
      .logo-title-container {
        width: auto;
        background: rgba(0,0,0,0.8);
        box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        border-bottom-right-radius: 15px;
      }
      nav {
        width: 300px;
      }
    }

    @media (max-width: 768px) {
      .logo-title-container {
        padding: 1rem 1.5rem;
      }
      .logo-title-container .site-title {
        font-size: 1.5rem;
      }
      .logo-title-container .logo {
        width: 50px;
        height: 50px;
      }
      nav {
        width: 100%;
        padding-top: 5rem;
      }
      .page-header {
        padding: 6rem 1rem 3rem;
      }
      .page-header h1 {
        font-size: 3rem;
      }
      .page-header p {
        font-size: 1rem;
      }
      .section {
        padding: 3rem 1rem;
      }
      .course-showcase-card, .unique-benefit-card { /* Apply responsive padding */
        padding: 1.5rem;
      }
      .course-showcase-card h3, .unique-benefit-card h3 {
        font-size: 1.5rem;
      }
      .benefits-grid-unique {
        grid-template-columns: 1fr; /* Stack on small screens */
      }
      .unique-benefit-card .icon-circle {
        width: 60px;
        height: 60px;
      }
      .unique-benefit-card .icon-circle svg {
        width: 35px;
        height: 35px;
      }
    }
  </style>
</head>
<body>

  <!-- Custom Message Box/Modal HTML (consistent with other pages) -->
  <div id="customMessageModal" class="custom-modal-overlay">
    <div class="custom-modal-content">
      <p id="customMessageText"></p>
      <button id="customMessageCloseButton">OK</button>
    </div>
  </div>

  <div id="customConfirmModal" class="custom-modal-overlay">
    <div class="custom-modal-content">
      <p id="customConfirmText"></p>
      <button id="customConfirmYesButton" class="confirm-button">Yes</button>
      <button id="customConfirmNoButton" class="cancel-button">No</button>
    </div>
  </div>

  <!-- Logo and Site Title - Consistent with other pages -->
  <div class="logo-title-container">
    <img src="logo.png" alt="Partnerdesk Logo" class="logo">
    <span class="site-title">Partnerdesk</span>
  </div>

  <!-- Hamburger Menu - Consistent with other pages -->
  <div class="hamburger-menu" onclick="window.toggleNav()">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>

  <!-- Navigation Overlay - Consistent with other pages -->
  <div class="overlay" onclick="window.toggleNav()"></div>

  <!-- Navigation Bar - Consistent with other pages -->
  <nav id="main-nav">
<a href="index.html" onclick="window.toggleNav()">Home</a>
    <a href="internships.html" onclick="window.toggleNav()">Internships</a>
    <a href="learning.html" onclick="window.toggleNav()">Learning Centre</a>
    <a href="freelancing.html" onclick="window.toggleNav()">Freelancing</a>
    <a href="partners.html" onclick="window.toggleNav()">Our Partners</a>
    <a href="about.html" onclick="window.toggleNav()">About</a>
    <a href="careers.html" onclick="window.toggleNav()">Careers</a>
    <a href="blog.html" onclick="window.toggleNav()">Blog</a>
    <a href="contact.html" onclick="window.toggleNav()">Contact Us</a>
    <div class="nav-divider my-4 h-px bg-gray-700"></div> <a href="verify.html" onclick="window.toggleNav()">Authenticate</a>
    <a href="downloads.html" onclick="window.toggleNav()">Downloads</a> <a href="admin_login.html" id="adminLoginLink" class="hidden" onclick="window.toggleNav()">Admin Login</a>
  </nav>

  <!-- Page Header Section -->
  <header class="page-header">
    <h1>Empower Your Skills with Partnerdesk Learning Centre</h1>
    <p>At Partnerdesk Learning Centre, we believe learning should never stop. Our platform offers exclusive courses, workshops, seminars / webinars, and skill-building sessions to help you grow faster and perform better in your chosen field.</p>
  </header>

  <!-- Introduction Section -->
  <section class="section">
    <p class="text-xl max-w-3xl mx-auto text-center" style="color: #c0c0d0;">
      Whether you're an intern, student, or working professional, our Learning Centre provides the tools you need to succeed. Explore our diverse range of courses designed by industry experts to give you practical, career-ready skills.
    </p>
  </section>

  <!-- Courses Section -->
  <section class="section" id="courses-section">
    <h2>Our Skill-Building Courses</h2>
    <p class="text-lg max-w-3xl mx-auto mb-10" style="color: #a0a0b5;">
      Dive into our comprehensive courses, crafted to provide you with in-depth knowledge and practical expertise in various domains. Each course is designed to be interactive and impactful.
    </p>

    <!-- Loading and No Courses messages -->
    <div id="loadingCourses" class="text-center text-pink-400">Loading courses...</div>
    <p id="noCoursesMessage" class="text-xl text-gray-400 mt-10 hidden">No courses found.</p>

    <!-- Course Showcase Cards will be loaded dynamically from Firestore here -->
    <div id="coursesList">
    </div>
  </section>

  <!-- Why Join Our Course? Section -->
  <section class="section why-join-section">
    <h2>Why Choose Partnerdesk Courses?</h2>
    <p class="intro-text">
      Our courses are meticulously designed to transform your potential into tangible skills and career opportunities. Here's what makes Partnerdesk Learning Centre truly unique:
    </p>
    <div class="benefits-grid-unique">
      <div class="unique-benefit-card ub-color-1">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
          </svg>
        </div>
        <h3>Industry-Led Curriculum</h3>
        <p>Learn from active professionals and experts who bring real-world insights and the latest industry trends directly to your lessons.</p>
      </div>
      <div class="unique-benefit-card ub-color-2">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z"/>
          </svg>
        </div>
        <h3>Hands-On Practical Training</h3>
        <p>Our courses focus on practical application, not just theory. Work on projects and exercises that build your portfolio and real-world skills.</p>
      </div>
      <div class="unique-benefit-card ub-color-3">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z"/>
          </svg>
        </div>
        <h3>Guaranteed Skill Advancement</h3>
        <p>We promise tangible skill development that directly impacts your career trajectory, making you more competitive in the job market.</p>
      </div>
      <div class="unique-benefit-card ub-color-4">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
          </svg>
        </div>
        <h3>Flexible & Accessible Learning</h3>
        <p>Learn at your own pace, from anywhere in the world. Our flexible modules fit into your schedule, allowing you to balance learning with other commitments.</p>
      </div>
      <div class="unique-benefit-card ub-color-5">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
        <h3>Vibrant Learning Community</h3>
        <p>Connect with a network of aspiring professionals and mentors. Collaborate on projects, share insights, and build lasting relationships that extend beyond the course.</p>
      </div>
    </div>
  </section>

  <section class="section how-to-register-section">
    <h2>Ready to Elevate Your Skills?</h2>
    <p>
      Join the Partnerdesk Learning Centre and start your journey towards mastering new skills and achieving your career goals. Our flexible and practical courses are designed for learners of all levels.
    </p>
    <p class="font-bold text-xl">📩 Here’s how you can register:</p>
    <p>Simply click the "Register Now" button below or on any course card to fill out the registration form.</p>
    <p class="text-lg mt-4">
      💡 Invest in yourself today and unlock your full potential with Partnerdesk!
    </p>
    <a href="#courses-section" class="register-button">Register Now</a>
    <p class="text-xl mt-8" style="color: #e0e0eb;">For Queries Contact Us at : <strong>7525869600</strong></p>
  </section>

  <!-- Container for Admin Panel (will be populated by JS) -->
  <div id="adminPanelContainer" class="admin-panel-container"></div>

  <footer>
    <p>&copy; 2025 Partnerdesk. All Rights Reserved.</p>
    <p>Partnerdesk is a registered MSME under the Government of India.</p>
    <p>Registration No. : <span id="footerMsmeRegNo">UDYAM-UP-03-0104523</span></p>
    <p>Registered Office :</p>
    <p><span id="footerAddress">9/8, George Town, Prayagraj, Uttar Pradesh, Pin–211001</span></p>
    <p>Email: <span id="footerEmail">info@partnerdesk.in</span></p>
    <p>Phone: <span id="footerPhone">+91-XXXXXXXXXX</span></p>
  </footer>

  <script type="module">
    // Firebase SDK imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, doc, deleteDoc, updateDoc, getDoc, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // IMPORTANT: Replace this with your actual Firebase config object
    const firebaseConfig = {
          apiKey: "AIzaSyAiEhapkQvQnOtxZCQFa6TbOEWg3yelS8c",
          authDomain: "certificates-b42ef.firebaseapp.com",
          projectId: "certificates-b42ef",
          storageBucket: "certificates-b42ef.firebasestorage.app",
          messagingSenderId: "317230336893",
          appId: "1:317230336893:web:915181dc11ed7264255a14",
      // measurementId: "YOUR_MEASUREMENT_ID" // Optional
    };

    // --- Cloudinary Configuration ---
    // YOU MUST REPLACE THESE WITH YOUR OWN CLOUDINARY CREDENTIALS
    const CLOUDINARY_CLOUD_NAME = 'dy15lyntn'; // e.g., 'my-awesome-cloud'
    const CLOUDINARY_UPLOAD_PRESET = 'partnerdesk_learning_uploads'; // e.g., 'partnerdesk_learning_uploads'
    // --------------------------------

    // Use your projectId as the appId for consistency with Firestore paths
    const currentAppId = firebaseConfig.projectId;

    let app;
    let db;
    let auth;
    let currentUserId; // To store the authenticated user's ID

    // Initialize Firebase
    app = initializeApp(firebaseConfig);
    db = getFirestore(app);
    auth = getAuth(app);

    // Expose app, db, and auth globally for console access and admin functions
    window.app = app;
    window.db = db;
    window.auth = auth;
    window.firebaseConfig = firebaseConfig; // Also expose config if needed

    // Log the App ID being used at startup
    console.log("App ID being used (from firebaseConfig.projectId):", currentAppId);

    // --- Custom Modal/Message Box Functions (consistent with other pages) ---
    function showMessage(message, type = 'info') {
        const modal = document.getElementById('customMessageModal');
        const messageText = document.getElementById('customMessageText');
        const closeButton = document.getElementById('customMessageCloseButton');

        if (!modal || !messageText || !closeButton) {
            console.error("Custom message modal elements not found. Falling back to alert.");
            alert(message);
            return;
        }

        messageText.textContent = message;
        modal.classList.add('active');
        closeButton.onclick = () => modal.classList.remove('active');
    }

    function showConfirm(message) {
        return new Promise(resolve => {
            const modal = document.getElementById('customConfirmModal');
            const confirmText = document.getElementById('customConfirmText');
            const yesButton = document.getElementById('customConfirmYesButton');
            const noButton = document.getElementById('customConfirmNoButton');

            if (!modal || !confirmText || !yesButton || !noButton) {
                console.error("Custom confirm modal elements not found. Falling back to confirm.");
                resolve(confirm(message));
                return;
            }

            confirmText.textContent = message;
            modal.classList.add('active');

            const cleanup = () => {
                modal.classList.remove('active');
                yesButton.onclick = null;
                noButton.onclick = null;
            };

            yesButton.onclick = () => {
                cleanup();
                resolve(true);
            };
            noButton.onclick = () => {
                cleanup();
                resolve(false);
            };
        });
    }
    // ---------------------------------------------------------------------------

    // Helper functions for color manipulation (reused from freelancing.html)
    function hexToRgb(hex) {
        let r = 0, g = 0, b = 0;
        if (hex.length === 7) { // #RRGGBB
            r = parseInt(hex.substring(1, 3), 16);
            g = parseInt(hex.substring(3, 5), 16);
            b = parseInt(hex.substring(5, 7), 16);
        } else if (hex.length === 4) { // #RGB
            r = parseInt(hex[1] + hex[1], 16);
            g = parseInt(hex[2] + hex[2], 16);
            b = parseInt(hex[3] + hex[3], 16);
        }
        return { r, g, b };
    }

    function getLuminance(r, g, b) {
        const R = r / 255;
        const G = g / 255;
        const B = b / 255;
        const sRGBtoLinear = (c) => (c <= 0.03928) ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
        const linearR = sRGBtoLinear(R);
        const linearG = sRGBtoLinear(G);
        const linearB = sRGBtoLinear(B);
        return 0.2126 * linearR + 0.7152 * linearG + 0.0722 * linearB;
    }

    function getTextColorForBackground(hexColor) {
        const { r, g, b } = hexToRgb(hexColor);
        const luminance = getLuminance(r, g, b);
        if (luminance > 0.179) { // Adjusted threshold for better contrast
            return '#1a1a2e'; // Dark text for light backgrounds
        } else {
            return '#e0e0eb'; // Light text for dark backgrounds
        }
    }

    function lightenColor(hex, percent) {
        let f = parseInt(hex.slice(1), 16);
        let t = percent < 0 ? 0 : 255;
        let p = percent < 0 ? percent * -1 : percent; // Corrected initialization
        let R = f >> 16;
        let G = (f >> 8) & 0x00FF;
        let B = f & 0x0000FF;
        return "#" + (0x1000000 + (Math.round((t - R) * p) + R) * 0x10000 + (Math.round((t - G) * p) + G) * 0x100 + (Math.round((t - B) * p) + B)).toString(16).slice(1);
    }

    // --- Cloudinary Image Upload Function (reused from freelancing.html) ---
    window.handleImageUpload = async function(event) {
        const file = event.target.files[0];
        console.log("handleImageUpload: File selected:", file);

        if (!file) {
            console.log("handleImageUpload: No file selected.");
            return;
        }

        if (!CLOUDINARY_CLOUD_NAME || CLOUDINARY_CLOUD_NAME === 'YOUR_CLOUDINARY_CLOUD_NAME_FOR_LEARNING' ||
            !CLOUDINARY_UPLOAD_PRESET || CLOUDINARY_UPLOAD_PRESET === 'YOUR_CLOUDINARY_UPLOAD_PRESET_NAME_FOR_LEARNING') {
            showMessage("Cloudinary not configured. Please set CLOUDINARY_CLOUD_NAME and CLOUDINARY_UPLOAD_PRESET for learning in the code.", 'error');
            return;
        }

        const imageUploadLoading = document.getElementById('imageUploadLoading');
        imageUploadLoading.style.display = 'block'; // Show loading indicator
        document.getElementById('courseImageUrlInput').value = ''; // Clear existing URL

        const formData = new FormData();
        formData.append('file', file);
        formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);

        try {
            const response = await fetch(`https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`, {
                method: 'POST',
                body: formData
            });

            if (!response.ok) {
                const errorData = await response.json();
                console.error("Cloudinary upload failed:", errorData);
                throw new Error(errorData.error ? errorData.error.message : 'Unknown Cloudinary error');
            }

            const data = await response.json();
            const downloadURL = data.secure_url; // Use secure_url for HTTPS

            document.getElementById('courseImageUrlInput').value = downloadURL;
            imageUploadLoading.textContent = 'Upload complete!';
            imageUploadLoading.style.color = '#4CAF50'; // Green for success
            console.log('File available at', downloadURL);
            setTimeout(() => {
                imageUploadLoading.style.display = 'none'; // Hide after a delay
                imageUploadLoading.style.color = '#e94560'; // Reset color to pink accent
            }, 3000);

        } catch (error) {
            console.error("Image upload failed:", error);
            imageUploadLoading.textContent = `Upload failed: ${error.message}`;
            imageUploadLoading.style.color = '#EF4444'; // Red for error
            showMessage(`Image upload failed: ${error.message}`, 'error');
        }
    }
    // -------------------------------------------------------------------


    // Function to render the admin panel dynamically
    function renderAdminPanel() {
      const adminPanelContainer = document.getElementById('adminPanelContainer');
      if (!adminPanelContainer) {
        console.error("Admin panel container not found!");
        return;
      }

      adminPanelContainer.innerHTML = `
        <h2 class="text-3xl font-bold mb-4 text-white">Manage Courses</h2>
        <div class="admin-panel">
          <p class="admin-message">
            <strong>Note:</strong> Changes made here will be saved directly to the database and will persist.
          </p>

          <input type="hidden" id="currentCourseId">

          <div class="input-group">
            <label for="courseTitleInput">Course Title:</label>
            <input type="text" id="courseTitleInput" placeholder="e.g., Financial Literacy & Stock Market">
          </div>
          <div class="input-group">
            <label for="courseDurationInput">Duration (e.g., 3 months):</label>
            <input type="text" id="courseDurationInput" placeholder="e.g., 3 months">
          </div>
          <div class="input-group">
            <label for="coursePriceInput">Price (e.g., ₹14999/- only):</label>
            <input type="text" id="coursePriceInput" placeholder="e.g., ₹14999/- only">
          </div>
          <div class="input-group">
            <label for="courseDescriptionInput">Description:</label>
            <textarea id="courseDescriptionInput" placeholder="A detailed description of the course."></textarea>
          </div>
          <div class="input-group">
            <label for="courseImageUrlInput">Image URL (or upload below):</label>
            <input type="text" id="courseImageUrlInput" placeholder="e.g., https://res.cloudinary.com/your-cloud/image.png">
          </div>
          <div class="input-group">
            <label for="courseImageUpload">Upload Image to Cloudinary:</label>
            <input type="file" id="courseImageUpload" accept="image/*">
            <div id="imageUploadLoading" class="image-upload-loading">Uploading...</div>
          </div>
          <div class="input-group">
            <label for="courseRegisterLinkInput">Registration Link:</label>
            <input type="text" id="courseRegisterLinkInput" placeholder="e.g., https://forms.gle/...">
          </div>
          <div class="input-group">
            <label for="courseSyllabusLinkInput">Syllabus Link (optional):</label>
            <input type="text" id="courseSyllabusLinkInput" placeholder="e.g., # or link to PDF">
          </div>
          <div class="input-group">
            <label for="courseCardColorInput">Card Color:</label>
            <input type="color" id="courseCardColorInput" value="#3182CE"> <!-- Added color picker -->
          </div>

          <button id="saveCourseButton">Add New Course</button>
          <button id="clearCourseFormButton" class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition duration-200">Clear Form</button>

          <div class="course-management">
            <h3>Existing Courses</h3>
            <div class="course-list" id="courseListDisplay">
                <!-- Courses will be listed here for management -->
            </div>
          </div>
        </div>
        <button id="logoutAdminButton" class="logout-admin-button">Logout Admin</button>
      `;

      // Attach event listeners after elements are created
      document.getElementById('saveCourseButton').onclick = window.addOrUpdateCourse;
      document.getElementById('clearCourseFormButton').onclick = window.clearCourseForm;
      document.getElementById('logoutAdminButton').onclick = window.adminLogout;
      document.getElementById('courseImageUpload').addEventListener('change', window.handleImageUpload); // Attach image upload listener

      // Load courses for the admin panel
      window.loadCoursesForAdminPanel();
    }

    // Listen for authentication state changes
    document.addEventListener('DOMContentLoaded', () => {
        onAuthStateChanged(auth, (user) => {
            const adminPanelContainer = document.getElementById('adminPanelContainer');
            const adminLoginLink = document.getElementById('adminLoginLink');

            if (user) {
                currentUserId = user.uid;
                console.log("onAuthStateChanged: User is authenticated. UID:", currentUserId);
                renderAdminPanel();
                if (adminLoginLink) {
                    adminLoginLink.classList.add('hidden'); // Hide Admin Login link if logged in
                }
            } else {
                currentUserId = null;
                console.log("onAuthStateChanged: No user authenticated.");
                if (adminPanelContainer) {
                    adminPanelContainer.innerHTML = ''; // Clear admin panel if not logged in
                }
                if (adminLoginLink) {
                    adminLoginLink.classList.remove('hidden'); // Show Admin Login link if not logged in
                }
            }
            // Always load courses for the main display regardless of admin status
            window.loadCoursesForDisplay();
            loadContactInfoIntoFooter(); // Load footer info after auth state is known
        });
    });

    // Course Management Functions for Admin Panel
    let coursesCache = []; // Cache to hold courses for reordering

    window.loadCoursesForAdminPanel = function() {
        if (!db) {
            console.error("loadCoursesForAdminPanel: Firestore not initialized. Cannot load data.");
            return;
        }
        const collectionPath = `artifacts/${currentAppId}/public/data/courses`;
        console.log("loadCoursesForAdminPanel: Attempting to load courses from path:", collectionPath);

        // Order by 'order' field for consistent display and reordering logic
        onSnapshot(query(collection(db, collectionPath)), (snapshot) => {
            const courses = [];
            snapshot.forEach(doc => {
                courses.push({ id: doc.id, ...doc.data() });
            });
            // Sort client-side to ensure consistent order for move operations
            courses.sort((a, b) => (a.order || 0) - (b.order || 0));
            coursesCache = courses; // Update cache
            window.renderCourseListAdmin(courses);
        }, (error) => {
            console.error("Error fetching courses for admin panel: ", error);
            showMessage(`Error loading courses for admin: ${error.message}`, 'error');
        });
    }

    window.renderCourseListAdmin = function(courses) {
        const courseListDisplay = document.getElementById('courseListDisplay');
        if (!courseListDisplay) return;

        courseListDisplay.innerHTML = '';
        if (courses.length === 0) {
            courseListDisplay.innerHTML = '<p class="text-gray-500 text-center py-4">No courses added yet.</p>';
            return;
        }

        courses.forEach((course, index) => {
            const courseItem = document.createElement('div');
            courseItem.className = 'course-item';
            courseItem.innerHTML = `
                <div>
                    <strong class="text-white">${course.title}</strong><br>
                    <span class="text-gray-400 text-sm">${course.duration} | ${course.price}</span>
                </div>
                <div class="course-actions mt-2">
                    <button class="bg-blue-500 hover:bg-blue-600" onclick="window.editCourse('${course.id}')">Edit</button>
                    <button class="bg-red-500 hover:bg-red-600" onclick="window.deleteCourse('${course.id}')">Delete</button>
                    <button class="bg-gray-500 hover:bg-gray-600 ${index === 0 ? 'opacity-50 cursor-not-allowed' : ''}" ${index === 0 ? 'disabled' : ''} onclick="window.moveCourseUp('${course.id}')">Move Up</button>
                    <button class="bg-gray-500 hover:bg-gray-600 ${index === courses.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}" ${index === courses.length - 1 ? 'disabled' : ''} onclick="window.moveCourseDown('${course.id}')">Move Down</button>
                </div>
            `;
            courseListDisplay.appendChild(courseItem);
        });
    }

    window.addOrUpdateCourse = async function() {
        if (!db || !auth.currentUser) {
            showMessage("Error: Not authenticated. Please log in as admin.", 'error');
            return;
        }

        const courseId = document.getElementById('currentCourseId').value;
        const title = document.getElementById('courseTitleInput').value.trim();
        const duration = document.getElementById('courseDurationInput').value.trim();
        const price = document.getElementById('coursePriceInput').value.trim();
        const description = document.getElementById('courseDescriptionInput').value.trim();
        let imageUrl = document.getElementById('courseImageUrlInput').value.trim();
        const registerLink = document.getElementById('courseRegisterLinkInput').value.trim();
        const syllabusLink = document.getElementById('courseSyllabusLinkInput').value.trim();
        const cardColor = document.getElementById('courseCardColorInput').value; // Get color value

        if (!title || !duration || !price || !description || !imageUrl || !registerLink || !cardColor) {
            showMessage('Please fill in all required fields (Title, Duration, Price, Description, Image URL, Registration Link, Card Color).', 'error');
            return;
        }

        // Provide a default image if none is given
        if (!imageUrl) {
            imageUrl = 'https://placehold.co/800x450/e94560/FFFFFF?text=No+Image';
        }

        const courseData = {
            title: title,
            duration: duration,
            price: price,
            description: description,
            imageUrl: imageUrl,
            registerLink: registerLink,
            syllabusLink: syllabusLink,
            cardColor: cardColor, // Save color
            lastUpdated: new Date().toISOString(),
            updatedBy: auth.currentUser.uid
        };

        try {
            if (courseId) {
                const courseDocRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, courseId);
                await updateDoc(courseDocRef, courseData);
                showMessage('Course updated successfully!', 'success');
            } else {
                // For new courses, determine the next order number
                const maxOrder = coursesCache.reduce((max, course) => Math.max(max, course.order || 0), 0);
                courseData.order = maxOrder + 1; // Assign next order number
                await addDoc(collection(db, `artifacts/${currentAppId}/public/data/courses`), courseData);
                showMessage('Course added successfully!', 'success');
            }
            window.clearCourseForm();
        } catch (e) {
            console.error("Error adding/updating course: ", e);
            showMessage(`Error adding/updating course: ${e.message}`, 'error');
        }
    }

    window.editCourse = async function(id) {
        if (!db) {
            console.error("Firestore not initialized. Cannot edit course.");
            showMessage("Error: Database not ready to edit course.", 'error');
            return;
        }
        const courseDocRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, id);
        try {
            const docSnap = await getDoc(courseDocRef);
            if (docSnap.exists()) {
                const course = docSnap.data();
                document.getElementById('currentCourseId').value = id;
                document.getElementById('courseTitleInput').value = course.title;
                document.getElementById('courseDurationInput').value = course.duration;
                document.getElementById('coursePriceInput').value = course.price;
                document.getElementById('courseDescriptionInput').value = course.description;
                document.getElementById('courseImageUrlInput').value = course.imageUrl || '';
                document.getElementById('courseRegisterLinkInput').value = course.registerLink;
                document.getElementById('courseSyllabusLinkInput').value = course.syllabusLink || '';
                document.getElementById('courseCardColorInput').value = course.cardColor || '#3182CE'; // Populate color picker
                document.getElementById('saveCourseButton').textContent = 'Update Course';
                window.scrollTo({ top: document.getElementById('adminPanelContainer').offsetTop, behavior: 'smooth' });
            } else {
                console.error("No such course document!");
                showMessage("Course not found for editing.", 'error');
            }
        } catch (e) {
            console.error("Error fetching course for edit: ", e);
            showMessage(`Error fetching course: ${e.message}`, 'error');
        }
    }

    window.clearCourseForm = function() {
        document.getElementById('currentCourseId').value = '';
        document.getElementById('courseTitleInput').value = '';
        document.getElementById('courseDurationInput').value = '';
        document.getElementById('coursePriceInput').value = '';
        document.getElementById('courseDescriptionInput').value = '';
        document.getElementById('courseImageUrlInput').value = '';
        document.getElementById('courseRegisterLinkInput').value = '';
        document.getElementById('courseSyllabusLinkInput').value = '';
        document.getElementById('courseCardColorInput').value = '#3182CE'; // Reset color picker
        document.getElementById('saveCourseButton').textContent = 'Add New Course';
        document.getElementById('imageUploadLoading').style.display = 'none'; // Hide upload message
        document.getElementById('imageUploadLoading').textContent = 'Uploading...'; // Reset message
        document.getElementById('imageUploadLoading').style.color = '#e94560'; // Reset color
        document.getElementById('courseImageUpload').value = ''; // Clear file input
    }

    window.deleteCourse = async function(docId) {
        if (!db || !auth.currentUser) {
            showMessage("Error: Not authenticated. Please log in as admin.", 'error');
            return;
        }

        const confirmDelete = await showConfirm("Are you sure you want to delete this course? This action cannot be undone.");
        
        if (!confirmDelete) {
            console.log("Deletion cancelled by user.");
            return;
        }

        try {
            const courseDocRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, docId);
            await deleteDoc(courseDocRef);
            console.log("Course successfully deleted with ID:", docId);
            showMessage("Course deleted successfully!", 'success');
        } catch (e) {
            console.error("Error removing course:", e);
            showMessage(`Error deleting course: ${e.message}`, 'error');
        }
    }

    // --- Reordering Functions ---
    window.moveCourseUp = async function(courseId) {
        if (!db || !auth.currentUser) {
            showMessage("Error: Not authenticated. Please log in as admin.", 'error');
            return;
        }

        const index = coursesCache.findIndex(s => s.id === courseId);
        if (index <= 0) { // Already at the top or not found
            return;
        }

        const currentCourse = coursesCache[index];
        const prevCourse = coursesCache[index - 1];

        // Perform a Firestore transaction to swap order values atomically
        try {
            await runTransaction(db, async (transaction) => {
                const currentCourseRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, currentCourse.id);
                const prevCourseRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, prevCourse.id);

                const currentDoc = await transaction.get(currentCourseRef);
                const prevDoc = await transaction.get(prevCourseRef);

                if (!currentDoc.exists() || !prevDoc.exists()) {
                    throw "Document does not exist!";
                }

                const currentOrder = currentDoc.data().order || 0;
                const prevOrder = prevDoc.data().order || 0;

                transaction.update(currentCourseRef, { order: prevOrder });
                transaction.update(prevCourseRef, { order: currentOrder });
            });
            console.log("Course order swapped successfully!");
            // The onSnapshot listener will automatically re-render the list
        } catch (e) {
            console.error("Error moving course up:", e);
            showMessage(`Error moving course up: ${e.message}`, 'error');
        }
    };

    window.moveCourseDown = async function(courseId) {
        if (!db || !auth.currentUser) {
            showMessage("Error: Not authenticated. Please log in as admin.", 'error');
            return;
        }

        const index = coursesCache.findIndex(s => s.id === courseId);
        if (index === -1 || index >= coursesCache.length - 1) { // Already at the bottom or not found
            return;
        }

        const currentCourse = coursesCache[index];
        const nextCourse = coursesCache[index + 1];

        // Perform a Firestore transaction to swap order values atomically
        try {
            await runTransaction(db, async (transaction) => {
                const currentCourseRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, currentCourse.id);
                const nextCourseRef = doc(db, `artifacts/${currentAppId}/public/data/courses`, nextCourse.id);

                const currentDoc = await transaction.get(currentCourseRef);
                const nextDoc = await transaction.get(nextCourseRef);

                if (!currentDoc.exists() || !nextDoc.exists()) {
                    throw "Document does not exist!";
                }

                const currentOrder = currentDoc.data().order || 0;
                const nextOrder = nextDoc.data().order || 0;

                transaction.update(currentCourseRef, { order: nextOrder });
                transaction.update(nextCourseRef, { order: currentOrder });
            });
            console.log("Course order swapped successfully!");
            // The onSnapshot listener will automatically re-render the list
        } catch (e) {
            console.error("Error moving course down:", e);
            showMessage(`Error moving course down: ${e.message}`, 'error');
        }
    };
    // ----------------------------


    // Function to load courses for display on the main page
    window.loadCoursesForDisplay = function() {
        if (!db) {
            console.error("loadCoursesForDisplay: Firestore not initialized. Cannot load data.");
            const loadingIndicator = document.getElementById('loadingCourses');
            if (loadingIndicator) {
                loadingIndicator.textContent = "Error: Database not ready.";
            }
            return;
        }
        const collectionPath = `artifacts/${currentAppId}/public/data/courses`;
        console.log("loadCoursesForDisplay: Attempting to load courses from path:", collectionPath);

        const coursesList = document.getElementById('coursesList');
        if (!coursesList) {
            console.error("coursesList element not found.");
            return;
        }
        coursesList.innerHTML = ''; // Clear existing static cards
        const loadingIndicator = document.getElementById('loadingCourses');
        if (loadingIndicator) {
            loadingIndicator.classList.remove('hidden'); // Show loading
        }

        // Order by 'order' field for display
        onSnapshot(query(collection(db, collectionPath)), (snapshot) => {
            if (loadingIndicator) {
                loadingIndicator.classList.add('hidden'); // Hide loading
            }
            const courses = [];
            snapshot.forEach(doc => {
                courses.push({ id: doc.id, ...doc.data() });
            });

            // Sort client-side to ensure consistent order for display, even if order field is missing
            courses.sort((a, b) => (a.order || 0) - (b.order || 0));

            const noCoursesMessage = document.getElementById('noCoursesMessage');
            if (courses.length === 0) {
                if (noCoursesMessage) {
                    noCoursesMessage.classList.remove('hidden');
                }
            } else {
                if (noCoursesMessage) {
                    noCoursesMessage.classList.add('hidden');
                }
                courses.forEach(course => {
                    // Use the stored color or a default dark background
                    const cardBgColor = course.cardColor || '#3182CE';
                    // Lighten the card background color for the border
                    const cardBorderColor = lightenColor(cardBgColor, 0.2); // Lighten by 20%
                    // Determine text color based on background
                    const cardTextColor = getTextColorForBackground(cardBgColor);

                    const cardHtml = `
                        <div class="course-showcase-card ${currentUserId ? 'admin-mode' : ''}"
                             style="background-color: ${cardBgColor}; border-color: ${cardBorderColor}; color: ${cardTextColor};">
                            <img src="${course.imageUrl || 'https://placehold.co/800x450/e94560/FFFFFF?text=No+Image'}" alt="${course.title}" onerror="this.onerror=null;this.src='https://placehold.co/800x450/e94560/FFFFFF?text=No+Image';">
                            <h3>${course.title || 'Untitled Course'} (${course.duration || 'N/A'}) – ${course.price || 'N/A'}</h3>
                            <p>${course.description || 'No description available.'}</p>
                            <div class="button-group">
                                <a href="${course.registerLink || '#'}" target="_blank" class="register-button" style="background-color: ${lightenColor(cardBgColor, 0.1)}; color: ${getTextColorForBackground(lightenColor(cardBgColor, 0.1))};">Register Now</a>
                                <a href="${course.syllabusLink || '#'}" target="_blank" class="syllabus-button" style="background-color: ${lightenColor(cardBgColor, -0.1)}; color: ${getTextColorForBackground(lightenColor(cardBgColor, -0.1))};">Download Syllabus</a>
                                ${currentUserId ? `<button class="edit-button bg-blue-500 hover:bg-blue-600" onclick="window.editCourse('${course.id}')">Edit</button>
                                <button class="delete-button bg-red-500 hover:bg-red-600" onclick="window.deleteCourse('${course.id}')">Delete</button>` : ''}
                            </div>
                        </div>
                    `;
                    coursesList.insertAdjacentHTML('beforeend', cardHtml);
                });
            }
        }, (error) => {
            console.error("Error fetching courses for display: ", error);
            if (loadingIndicator) {
                loadingIndicator.textContent = `Error loading courses: ${error.message}`;
            }
            showMessage(`Error loading courses for display: ${error.message}`, 'error');
        });
    }

    // Function to load contact info into the footer (reused from freelancing.html)
    function loadContactInfoIntoFooter() {
        if (!db) {
            console.error("Firestore not initialized. Cannot load contact info.");
            return;
        }

        const contactDocRef = doc(db, `artifacts/${currentAppId}/public/data/contactInfo`, 'mainContact');

        onSnapshot(contactDocRef, (docSnap) => {
            if (docSnap.exists()) {
                const data = docSnap.data();
                document.getElementById('footerAddress').textContent = data.address || '9/8, George Town, Prayagraj, Uttar Pradesh, Pin–211001';
                document.getElementById('footerEmail').textContent = data.email || 'info@partnerdesk.in';
                document.getElementById('footerPhone').textContent = data.phone || '+91-XXXXXXXXXX';
                document.getElementById('footerMsmeRegNo').textContent = data.msmeRegNo || 'UDYAM-UP-03-0104523';

            } else {
                // Default static info if no document exists
                document.getElementById('footerAddress').textContent = '9/8, George Town, Prayagraj, Uttar Pradesh, Pin–211001';
                document.getElementById('footerEmail').textContent = 'info@partnerdesk.in';
                document.getElementById('footerPhone').textContent = '+91-XXXXXXXXXX';
                document.getElementById('footerMsmeRegNo').textContent = 'UDYAM-UP-03-0104523';
            }
        }, (error) => {
            console.error("Error fetching contact info:", error);
            // Fallback to default static info on error
            document.getElementById('footerAddress').textContent = '9/8, George Town, Prayagraj, Uttar Pradesh, Pin–211001';
            document.getElementById('footerEmail').textContent = 'info@partnerdesk.in';
            document.getElementById('footerPhone').textContent = '+91-XXXXXXXXXX';
            document.getElementById('footerMsmeRegNo').textContent = 'UDYAM-UP-03-0104523';
        });
    }

    // Function to toggle navigation for mobile
    window.toggleNav = function() {
      const nav = document.getElementById('main-nav');
      const overlay = document.querySelector('.overlay');
      const body = document.body;

      nav.classList.toggle('active');
      overlay.classList.toggle('active');
      body.classList.toggle('no-scroll');
    }

    // Function to logout admin
    window.adminLogout = async function() {
      if (!auth) {
        console.warn("adminLogout: Firebase Auth not initialized.");
        return;
      }
      try {
        await signOut(auth);
        console.log("adminLogout: Logged out successfully.");
        window.location.href = 'admin_login.html';
      } catch (error) {
        console.error("adminLogout: Error during logout:", error.code, error.message);
        showMessage(`Logout failed: ${error.message}`, 'error');
      }
    }


    // ScrollReveal animations
    ScrollReveal().reveal('.logo-title-container', {
      delay: 100,
      origin: 'left',
      distance: '30px',
      duration: 800,
      easing: 'ease-in-out',
      reset: false
    });

    ScrollReveal().reveal('.page-header h1', {
      delay: 300,
      distance: '50px',
      origin: 'top',
      duration: 1000,
      easing: 'ease-out',
      reset: false
    });

    ScrollReveal().reveal('.page-header p', {
      delay: 500,
      distance: '30px',
      origin: 'bottom',
      duration: 1000,
      easing: 'ease-out',
      reset: false
    });

    ScrollReveal().reveal('.section h2', {
      delay: 200,
      distance: '40px',
      origin: 'top',
      duration: 900,
      easing: 'ease-in-out',
      reset: false
    });

    // Animations for the prominent course showcase cards
    ScrollReveal().reveal('.course-showcase-card', {
      interval: 200, /* Staggered appearance */
      delay: 400,
      distance: '50px',
      origin: 'bottom',
      duration: 1000,
      easing: 'ease-in-out',
      reset: false
    });

    // Animations for the new "Why Join Our Course?" section
    ScrollReveal().reveal('.why-join-section h2', {
      delay: 200,
      distance: '40px',
      origin: 'top',
      duration: 900,
      easing: 'ease-in-out',
      reset: false
    });
    ScrollReveal().reveal('.why-join-section .intro-text', {
      delay: 300,
      distance: '30px',
      origin: 'bottom',
      duration: 900,
      easing: 'ease-in-out',
      reset: false
    });
    ScrollReveal().reveal('.unique-benefit-card', {
      interval: 150, /* Staggered appearance for each unique benefit card */
      delay: 500,
      distance: '40px',
      origin: 'bottom',
      duration: 900,
      easing: 'ease-in-out',
      reset: false
    });


    ScrollReveal().reveal('.how-to-register-section', {
      delay: 200,
      distance: '40px',
      origin: 'bottom',
      duration: 900,
      easing: 'ease-in-out',
      reset: false
    });

    ScrollReveal().reveal('footer', {
      delay: 100,
      distance: '20px',
      origin: 'bottom',
      duration: 800,
      easing: 'ease-in-out',
      reset: false
    });

    // Close nav when a nav link is clicked
    document.querySelectorAll('#main-nav a').forEach(link => {
      link.addEventListener('click', () => {
        const nav = document.getElementById('main-nav');
        if (nav.classList.contains('active')) {
          window.toggleNav();
        }
      });
    });
  </script>
</body>
</html>
